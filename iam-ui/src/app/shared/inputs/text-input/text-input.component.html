<app-base-input #inputElement [title]="label()" [fullWidth]="fullWidth()" [isRequiredField]="hasRequiredValidator()">
  <!-- Input Slot -->
  <div input class="relative flex items-center w-full bg-white border border-neutral-200 rounded-md shadow-sm focus-within:ring-2 focus-within:ring-primary-400 transition-all">
    <!-- Prefix Select -->
    @if (isPrefixSelect()) {
      <div class="relative">
        <select
          [formControl]="prefixControl"
          (ngModelChange)="onPrefixChanged($event)"
          class="border-0 bg-transparent text-primary-800 focus:outline-none cursor-pointer pr-6 appearance-none h-[46px] pl-3"
          [attr.aria-label]="'Prefix selection for ' + (label() || 'input')"
        >
          @for (option of prefixOptions(); track option.value) {
            <option [value]="option.value">{{ option.label }}</option>
          }
        </select>
        <div class="absolute inset-y-0 right-2 flex items-center pointer-events-none">
          <svg class="w-3 h-3 text-primary-800" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
          </svg>
        </div>
      </div>
      <div class="h-4 w-px bg-neutral-200 mx-1"></div>
    }

    <!-- Input Field -->
    <div class="flex-1 relative flex items-center">
      @if (iconSrc()) {
        <app-svg-icon [size]="18" [src]="iconSrc()!" class="absolute pointer-events-none ml-3 text-neutral-400"></app-svg-icon>
      }
      <input
        [mask]="mask()"
        class="h-[46px] placeholder-neutral-400 text-black border-none outline-none focus:border-none bg-transparent flex-1"
        [class.pl-10]="iconSrc()"
        [class.pl-3]="!iconSrc()"
        [class.text-neutral-400]="formControl.disabled"
        [class.disabled-placeholder]="formControl.disabled"
        [formControl]="formControl"
        [ngClass]="getClass()"
        [type]="type()"
        [placeholder]="placeholder()"
        (focus)="onFocus()"
        (blur)="onBlur()"
        (input)="onValueChange($event)"
      >
      @if (actionIcon()) {
        <div (click)="onActionClicked()" class="absolute right-2 p-2 flex justify-center items-center hover:bg-neutral-100 rounded-full">
          <app-svg-icon [size]="18" [src]="actionIcon()!" class="text-neutral-400 cursor-pointer"></app-svg-icon>
        </div>
      }
    </div>
  </div>
     
  <!-- Error Slot -->
@if (formControl.errors && hasErrors) {
  <div error class="relative w-full">
    <div class="absolute top-full left-0 mt-0 z-10 flex items-start bg-white border border-orange-300 rounded shadow-md px-3 py-2 text-sm text-gray-800 w-max max-w-xs" role="tooltip">
      <!-- Icon -->
      <svg class="w-4 h-4 text-orange-500 mr-2 mt-0.5 flex-shrink-0" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 20 20">
        <path d="M10 2a8 8 0 108 8 8.01 8.01 0 00-8-8zM9 8h2v4H9zm0 6h2v2H9z"/>
      </svg>
      <!-- Error Message -->
      <span>{{ formControl.errors | humanizeFormMessages: errorMessages() }}</span>
      <!-- Tooltip arrow -->
      <div class="absolute -top-1 left-4 w-2 h-2 bg-white border-l border-t border-orange-300 transform rotate-45"></div>
    </div>
  </div>
}


</app-base-input>